Type: AWS::SecretsManager::RotationSchedule
Condition: CreateRDSCluster
DependsOn: RDSConnectionSecretTargetAttachment
Properties:
  SecretId: !Ref RDSConnectionSecret
  HostedRotationLambda:
    RotationType: PostgreSQLSingleUser
    RotationLambdaName: PostgreSQLSingleUser
    VpcSecurityGroupIds: ${self:resources.Outputs.VPCDefaultSecurityGroup.Value}
    VpcSubnetIds:
      Fn::Join:
        - ","
        - - ${self:resources.Outputs.PrivateSubnetOne.Value}
          - ${self:resources.Outputs.PrivateSubnetTwo.Value}
  RotationRules:
    Duration: 2h
    ScheduleExpression: "cron(0 8 1 * ? *)"
