Type: AWS::SecretsManager::RotationSchedule
Condition: CreateDocumentDBCluster
DependsOn: DocumentDBConnectionSecretTargetAttachment
Properties:
  SecretId: !Ref DocumentDBConnectionSecret
  HostedRotationLambda:
    RotationType: MongoDBSingleUser
    RotationLambdaName: MongoDBSingleUser
    VpcSecurityGroupIds: ${self:resources.Outputs.VPCDefaultSecurityGroup.Value}
    VpcSubnetIds:
      Fn::Join:
        - ","
        - - ${self:resources.Outputs.PrivateSubnetOne.Value}
          - ${self:resources.Outputs.PrivateSubnetTwo.Value}
  RotationRules:
    Duration: 2h
    ScheduleExpression: "cron(0 8 1 * ? *)"
